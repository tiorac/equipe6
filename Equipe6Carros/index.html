<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>avalon</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- awesome fontfamily -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Tweaks for older IEs-->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->

      <style>
         html, body {
         min-height: 100%;
         }
         body, div, form, input, select, p { 
         padding: 0;
         margin: 0;
         outline: none;
         font-family: Roboto, Arial, sans-serif;
         font-size: 14px;
         color: #666;
         line-height: 22px;
         }
         h1 {
         margin: 15px 0;
         font-weight: 400;
         }
         .testbox {
         display: flex;
         justify-content: center;
         align-items: center;
         height: inherit;
         padding: 3px;
         }
         form {
         width: 100%;
         padding: 20px;
         background: #fff;
         box-shadow: 0 2px 5px #ccc; 
         }
         input, select, textarea {
         margin-bottom: 10px;
         border: 1px solid #ccc;
         border-radius: 3px;
         }
         input:hover, select:hover, textarea:hover {
         outline: none;
         border: 1px solid #095484;
         }
         input {
         width: calc(100% - 10px);
         padding: 5px;
         }
         select {
         width: 100%;
         padding: 7px 0;
         background: transparent;
         }
         textarea {
         width: calc(100% - 6px);
         }
         .item {
         position: relative;
         margin: 10px 0;
         }
         input[type="date"]::-webkit-inner-spin-button {
         display: none;
         }
         .item i, input[type="date"]::-webkit-calendar-picker-indicator {
         position: absolute;
         font-size: 20px;
         color: #a9a9a9;
         }
         .item i {
         right: 2%;
         top: 30px;
         z-index: 1;
         }
         [type="date"]::-webkit-calendar-picker-indicator {
         right: 1%;
         z-index: 2;
         opacity: 0;
         cursor: pointer;
         }
         .btn-block {
         margin-top: 20px;
         text-align: center;
         }
         button {
         width: 150px;
         padding: 10px;
         border: none;
         -webkit-border-radius: 5px; 
         -moz-border-radius: 5px; 
         border-radius: 5px; 
         background-color: #095484;
         font-size: 16px;
         color: #fff;
         cursor: pointer;
         }
         button:hover {
         background-color: #0666a3;
         }
       </style>

   </head>
   <!-- body -->
   <body class="main-layout">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="" /></div>
      </div>
      <!-- end loader -->
   
   <div class="wrapper">

      <div class="sidebar">
         <!-- Sidebar  -->
        <nav id="sidebar">

            <div id="dismiss">
                <i class="fa fa-arrow-left"></i>
            </div>

            <ul class="list-unstyled components">
                
                <li class="active">
                    <a href="#home">Home</a>
                </li>
                <li>
                    <a href="#about">About</a>
                </li>
                <li>
                    <a href="#why_choose_us">why Choose Us</a>
                </li>
                <li>
                    <a href="#testimonial">Testimonial</a>
                </li>
                <li>
                    <a href="#contact">Contact</a>
                </li>
            </ul>

        </nav>
      </div>


      <div id="content">


      <!-- section -->
      <section id="home" class="top_section">
         <div class="row">
            <div class="col-lg-12">
               <!-- header -->
      <header>
         <!-- header inner -->
         <div class="container">
            <div class="row">
               <div class="col-lg-3 logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo"> <a href="index.html"><img src="images/logo.png" alt="#"></a> </div>
                     </div>
                  </div>
               </div>
               <div class="col-lg-9">
                  <div class="right_header_info">
                     <ul>
                        <li><img style="margin-right: 15px;" src="images/phone_icon.png" alt="#" /><a href="#">(11) 98888-7777</a></li>
                        <li><img style="margin-right: 15px;" src="images/mail_icon.png" alt="#" /><a href="#">equipe6@gmail.com</a></li>
                        <li><img src="images/search_icon.png" alt="#" /></li>
                         <li>
                           <button type="button" id="sidebarCollapse">
                              <img src="images/menu_icon.png" alt="#" />
                           </button>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
         <!-- end header inner -->
      </header>
      <section>
         <div class="container-fluid">
            <div class="row">
               <div class="col-md-5">
                  <div class="full slider_cont_section">
                     <h4>Welcome</h4>
                     <h3>EQUIPE 6</h3>
                     <p>Predição da média dos valores dos carros por marca.</p>
                     <div class="button_section">
                        <a href="#predicao">Vamos lá!</a>
                     </div>
                  </div>
               </div>
               <div class="col-md-7">
                 <div id="slider_main" class="carousel slide" data-ride="carousel">
                     <!-- The slideshow -->
                     <div class="carousel-inner">
                        <div class="carousel-item active">
                           <img src="images/slider_1.png" alt="#" />
                        </div>
                        <div class="carousel-item">
                           <img src="images/slider_2.png" alt="#" />
                        </div>
                     </div>
                     <div class="full center">
                        <a class="carousel-control-prev" href="#slider_main" data-slide="prev">
                          <i class="fa fa-angle-left" aria-hidden="true"></i>
                        </a>
                        <a class="carousel-control-next" href="#slider_main" data-slide="next">
                          <i class="fa fa-angle-right" aria-hidden="true"></i>
                        </a>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
      <!-- end header -->
            </div>
         </div>
      </section>
      <!-- end section -->
      
      <!-- section --> 
      <div id="predicao" class="section layout_padding">
         <div class="container">
            
            <div class="row">

                 <div class="col-lg-4 margin_top_30">
               <div class="full margin_top_30">
                  <h3 class="main_heading _left_side margin_top_30">Predição</h3>
                  <p class="large">Preencha os dados</p>
               </div>
               <div class="full button_section margin_top_30">
                  <form action="/">
                     <div class="item">
                        <p>Ano de fabricação</p>
                        <div>
                           <select id="ano" name="ano">
                            </select>
                        </div>
                      </div>
                      <div class="item">
                        <p>Mês de Referência</p>
                        <select id="mesRef" name="mesRef">
                          <option value="1">Janeiro</option>
                          <option value="2">Fevereiro</option>
                          <option value="3">Março</option>
                          <option value="4">Abril</option>
                          <option value="5">Maio</option>
                          <option value="6">Junho</option>
                          <option value="7">Julho</option>
                          <option value="8">Agosto</option>
                          <option value="9">Setembro</option>
                          <option value="10">Outubro</option>
                          <option value="11">Novembro</option>
                          <option value="12">Dezembro</option>
                        </select>
                      </div>
                      <div class="item">
                        <p>Ano de referência</p>
                        <div>
                           <select id="anoRef" name="anoRef">
                            </select>
                        </div>
                      </div>
                      <div class="item">
                        <p>Combustível</p>
                        <div>
                           <select id="combustivel" name="combustivel">
                            </select>
                        </div>
                      </div>
                      <div class="item">
                        <p>Marca</p>
                        <div>
                           <select  id="marca" name="marca">
                            </select>
                        </div>
                      </div>

                     <a id="obterResultados" href="#resultados">Continuar...</a>
                  </form>
                  
               </div>
            </div>

            <div class="col-lg-8">
               <div class="full margin_top_50_rs">
                  <img class="img-responsive" src="images/about_us.png" alt="#" />
               </div>
            </div>

            </div>

         </div>
      </div>
      <!-- end section -->

      <!-- section -->
      <section id="resultados" class="dark_bg_blue layout_padding cross_layout padding_top_0">
        <div class="container">
           <div class="row">
             <div class="col-md-12">
               <div class="full center">
                 <h2 class="heading_main orange_heading">
                     Valor da Predição: <span id="valor"></span>
                 </h2>
               </div>
               <div class="row">
                  <div class="col-lg-6">
                     <div class="full">
                        <div class="choose_blog text_align_center">
                            <h4>Valor Atual</h3>
                            <p id="valorAtual"></p>
                        </div>
                     </div>
                  </div>
                  <div class="col-lg-4">
                     <div class="full">
                        <div class="choose_blog text_align_center">
                           <h4>Valorização</h3>
                           <p id="valorDiff"></p>
                        </div>
                     </div>
                  </div>
               </div>
             </div>
           </div>
        </div>
      </section>
      <!-- end section -->



      <!-- footer -->
      <footer>
         <div class="container">
    
         </div>
      </footer>
      <!-- end footer -->

      <!-- copyright -->

      <div class="cpy_right">
          <div class="container">
              <div class="row">
                  <div class="col-md-12">
                     <div class="full">
                        <p>© 2019 All Rights Reserved. Design by <a href="https://html.design">Free Html Templates</a></p>
                     </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- right copyright -->

   </div>
</div>

   <div class="overlay"></div>
      
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <!-- Scrollbar Js Files -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <script type="text/javascript" src="js/jquery.serializejson.js"></script>

      <script type="text/javascript">
        $(document).ready(function () {
            $("#sidebar").mCustomScrollbar({
                theme: "minimal"
            });

            $('#dismiss, .overlay').on('click', function () {
                $('#sidebar').removeClass('active');
                $('.overlay').removeClass('active');
            });

            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').addClass('active');
                $('.overlay').addClass('active');
                $('.collapse.in').toggleClass('in');
                $('a[aria-expanded=true]').attr('aria-expanded', 'false');
            });

            var date = new Date();
            ano = 1985;
            while (ano <= date.getFullYear()) {
               $("#ano").append($("<option value='" + ano + "'>" + ano + "</option>"));
               ano++;
            }

            ano = date.getFullYear();
            while (ano <= (date.getFullYear() + 5)) {
               $("#anoRef").append($("<option value='" + ano + "'>" + ano + "</option>"));
               ano++;
            }
            
            $.get("http://127.0.0.1:5123/marcas", function(marcas, status){
               for (i in marcas) {
                  let marca = marcas[i];
                  $("#marca").append($("<option value='" + marca + "'>" + marca + "</option>"));
               }
            });

            $.get("http://127.0.0.1:5123/combustiveis", function(combustiveis, status){
               for (i in combustiveis) {
                  let combustivel = combustiveis[i];
                  $("#combustivel").append($("<option value='" + combustivel + "'>" + combustivel + "</option>"));
               }
            });

            $("#obterResultados").click(function () {
               var dados = $('form').serializeJSON();

               $.ajax({
                  type: 'POST',
                  url: 'http://127.0.0.1:5123/predicao',
                  data: JSON.stringify (dados),
                  success: function(valor) { 
                     $("#valor").text(valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }));

                     var date = new Date();
                     dados["mesRef"] = date.getMonth();
                     dados["anoRef"] = date.getFullYear();

                     $.ajax({
                        type: 'POST',
                        url: 'http://127.0.0.1:5123/predicao',
                        data: JSON.stringify (dados),
                        success: function(valorAtual) { 
                           var valorDiff = valor - valorAtual;
                           $("#valorAtual").text(valorAtual.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }));
                           $("#valorDiff").text(valorDiff.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }));
                           
                        },
                        contentType: "application/json",
                        dataType: 'json',
                        cache: false
                     });

                  },
                  contentType: "application/json",
                  dataType: 'json',
                  cache: false
               });
            });
        });
      </script>
    
      <script>
      // This example adds a marker to indicate the position of Bondi Beach in Sydney,
      // Australia.
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: {lat: 40.645037, lng: -73.880224},
          });

        var image = 'images/location_point.png';
          var beachMarker = new google.maps.Marker({
             position: {lat: 40.645037, lng: -73.880224},
             map: map,
             icon: image
          });
        }
        </script>
        <!-- google map js -->
          <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA8eaHt9Dh5H57Zh0xVTqxVdBFCvFMqFjQ&callback=initMap"></script>
        <!-- end google map js -->

   </body>
</html>